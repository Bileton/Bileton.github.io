<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/wxlog.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/wxlog.jpg">
  <link rel="mask-icon" href="/images/wxlog.jpg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="ARM架构ARM是一种精简指令集计算机架构（处理器架构）。 ARMv8-AArmv8-A架构支持处理器同时运行64位和32位程序，处理器在AArch64执行状态下运行64位程序，在AArch32执行状态下运行32位程序。 指令集架构AArch64（64位模式）引入了新的指令集，A64指令集，由32位宽的指令组成。 AArch32（32位模式）向后兼容32位的ARMv7-A指令集。 支持ARM指令集">
<meta property="og:type" content="article">
<meta property="og:title" content="ARM汇编">
<meta property="og:url" content="http://example.com/2024/12/16/ARM%E6%B1%87%E7%BC%96/index.html">
<meta property="og:site_name" content="白乐天">
<meta property="og:description" content="ARM架构ARM是一种精简指令集计算机架构（处理器架构）。 ARMv8-AArmv8-A架构支持处理器同时运行64位和32位程序，处理器在AArch64执行状态下运行64位程序，在AArch32执行状态下运行32位程序。 指令集架构AArch64（64位模式）引入了新的指令集，A64指令集，由32位宽的指令组成。 AArch32（32位模式）向后兼容32位的ARMv7-A指令集。 支持ARM指令集">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-12-16T06:14:08.000Z">
<meta property="article:modified_time" content="2025-03-28T01:59:34.301Z">
<meta property="article:author" content="Bileton">
<meta property="article:tag" content="ARM汇编">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/2024/12/16/ARM%E6%B1%87%E7%BC%96/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>ARM汇编 | 白乐天</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">白乐天</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">道阻且长，行则将至。</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">93</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">35</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">101</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/love.js"></script>
</div>
    </header>

    
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/12/16/ARM%E6%B1%87%E7%BC%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/android.svg">
      <meta itemprop="name" content="Bileton">
      <meta itemprop="description" content="路漫漫其修远夕！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="白乐天">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ARM汇编
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-12-16 14:14:08" itemprop="dateCreated datePublished" datetime="2024-12-16T14:14:08+08:00">2024-12-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-03-28 09:59:34" itemprop="dateModified" datetime="2025-03-28T09:59:34+08:00">2025-03-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%B1%87%E7%BC%96/" itemprop="url" rel="index"><span itemprop="name">汇编</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>11k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>10 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="ARM架构"><a href="#ARM架构" class="headerlink" title="ARM架构"></a>ARM架构</h1><p>ARM是一种精简指令集计算机架构（处理器架构）。</p>
<h2 id="ARMv8-A"><a href="#ARMv8-A" class="headerlink" title="ARMv8-A"></a>ARMv8-A</h2><p>Armv8-A架构支持处理器同时运行64位和32位程序，处理器在AArch64执行状态下运行64位程序，在AArch32执行状态下运行32位程序。</p>
<h2 id="指令集架构"><a href="#指令集架构" class="headerlink" title="指令集架构"></a>指令集架构</h2><h3 id="AArch64（64位模式）"><a href="#AArch64（64位模式）" class="headerlink" title="AArch64（64位模式）"></a>AArch64（64位模式）</h3><p>引入了新的指令集，<strong>A64指令集</strong>，由32位宽的指令组成。</p>
<h3 id="AArch32（32位模式）"><a href="#AArch32（32位模式）" class="headerlink" title="AArch32（32位模式）"></a>AArch32（32位模式）</h3><p>向后兼容32位的ARMv7-A指令集。</p>
<p>支持<strong>ARM指令集</strong>（固定32位指令长度）和<strong>Thumb指令集</strong>（16位和32位混合指令长度），称为<strong>A32</strong>和<strong>T32</strong>指令集	。</p>
<p>ARMv8-A的双模式设计实现了从32位到64位的过渡。</p>
<h2 id="AArch64执行状态"><a href="#AArch64执行状态" class="headerlink" title="AArch64执行状态"></a>AArch64执行状态</h2><h3 id="寄存器"><a href="#寄存器" class="headerlink" title="寄存器"></a>寄存器</h3><ul>
<li><p>A64共有32个64位寄存器（X0到X30）。</p>
</li>
<li><p>每个寄存器均支持 64 位和 32 位访问（例如 <code>X0</code> 和 <code>W0</code> 分别表示寄存器的高 64 位和低 32 位部分）。</p>
</li>
</ul>
<p><strong>Arm架构程序调用标准</strong></p>
<ul>
<li>X0~X7是参数寄存器，传递参数并返回结果。</li>
<li>X8用于传递间接结果的地址位置。</li>
<li>X9~X15是调用者保存的临时寄存器。</li>
<li>X16~X18是子程序内调用临时寄存器。</li>
<li>X19~X28是被调用者保存的寄存器。</li>
<li>X29用作栈帧寄存器（FP），跟踪栈帧。</li>
<li>X30用作链接寄存器（LR），保存函数返回地址。</li>
</ul>
<h2 id><a href="#" class="headerlink" title></a></h2><table>
<thead>
<tr>
<th>寄存器</th>
<th>名称</th>
<th>寄存器宽度</th>
</tr>
</thead>
<tbody><tr>
<td>PC</td>
<td>程序计数器</td>
<td>64位</td>
</tr>
<tr>
<td>SP</td>
<td>栈指针寄存器</td>
<td>64位</td>
</tr>
<tr>
<td>WSP</td>
<td>栈指针寄存器</td>
<td>32位</td>
</tr>
<tr>
<td>XZR</td>
<td>零寄存器</td>
<td>64位</td>
</tr>
<tr>
<td>WZR</td>
<td>零寄存器</td>
<td>32位</td>
</tr>
<tr>
<td>LR（X30）</td>
<td>链接寄存器</td>
<td>64位</td>
</tr>
<tr>
<td>ELR</td>
<td>异常链接寄存器</td>
<td>64位</td>
</tr>
<tr>
<td>PSTATE</td>
<td>程序状态寄存器</td>
<td>64位</td>
</tr>
<tr>
<td>SPSR_ELx</td>
<td>保存进程状态寄存器</td>
<td>32位</td>
</tr>
</tbody></table>
<ul>
<li><strong>程序计数器</strong></li>
</ul>
<p>​	PC保存当前指令的地址。所有指令在加载之前都必须从PC引用的内存位置加载。</p>
<ul>
<li><strong>栈指针</strong></li>
</ul>
<p>​	SP用于跟踪当前线程的栈位置，通常指向该线程栈的逻辑“顶部”。</p>
<ul>
<li><strong>零寄存器</strong></li>
</ul>
<p>​	它被定义为始终保存0值。</p>
<ul>
<li><strong>链接寄存器</strong></li>
</ul>
<p>​	它主要用于存储调用函数时的返回地址。</p>
<ul>
<li><strong>栈帧指针</strong></li>
</ul>
<p>​	跟踪栈帧。</p>
<h2 id="AArch32执行状态"><a href="#AArch32执行状态" class="headerlink" title="AArch32执行状态"></a>AArch32执行状态</h2><h3 id="寄存器-1"><a href="#寄存器-1" class="headerlink" title="寄存器"></a>寄存器</h3><ul>
<li><p>16 个 32 位通用寄存器（<code>R0</code> 到 <code>R15</code>）。</p>
</li>
<li><p>PC（程序计数器）占用 <code>R15</code>，<code>R14</code> 通常作为链接寄存器（LR），<code>R13</code> 通常作为栈指针（SP）。</p>
</li>
</ul>
<h1 id="数据处理指令"><a href="#数据处理指令" class="headerlink" title="数据处理指令"></a>数据处理指令</h1><p><strong>指令的基本语法</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;操作码&gt; &lt;目标寄存器&gt;, &lt;操作数1&gt;, &lt;操作数2&gt;</span><br><span class="line"></span><br><span class="line">&lt;操作码&gt;：指令的操作代码，决定了具体的功能（如加法、减法、逻辑操作等）。</span><br><span class="line">&lt;目标寄存器&gt;：结果存储的目标寄存器。</span><br><span class="line">&lt;操作数1&gt; 和 &lt;操作数2&gt;：参与运算的两个操作数，可以是寄存器或立即数。</span><br></pre></td></tr></table></figure>

<ul>
<li>在A32&#x2F;T32指令中目标寄存器表示为Rd</li>
<li>在A64指令中目标寄存器表示为Xd或Wd</li>
<li>在A32&#x2F;T32指令中输入寄存器表示为Rm、Rn或Ra</li>
<li>在A64指令中输入寄存器表示为Xn或Xm</li>
</ul>
<h2 id="条件标志位"><a href="#条件标志位" class="headerlink" title="条件标志位"></a>条件标志位</h2><ul>
<li><p><strong>N</strong>(Negative)：</p>
<p>结果为负数，则值为1；</p>
<p>结果是正数或零，则值为0。</p>
</li>
<li><p><strong>Z</strong>(Zero)：</p>
<p>结果为 0，则值为1。</p>
<p>否则，值为0。</p>
</li>
<li><p><strong>C</strong>(Carry)：</p>
<p>如果结果产生了进位条件，则值为1；</p>
<p>否则，值为0。</p>
</li>
<li><p><strong>V</strong>(Overflow)：</p>
<p>如果指令结果导致溢出条件，则值为1。</p>
</li>
</ul>
<h2 id="算术指令"><a href="#算术指令" class="headerlink" title="算术指令"></a>算术指令</h2><h3 id="add"><a href="#add" class="headerlink" title="add"></a>add</h3><p>加法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add x0,x1,x2  ;x0=x1+x2</span><br></pre></td></tr></table></figure>

<h3 id="adds"><a href="#adds" class="headerlink" title="adds"></a>adds</h3><p>加法运算并更新条件标志</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adds x0,x1,x2  ;x0=x1+x2 and set flags</span><br></pre></td></tr></table></figure>

<h3 id="adr"><a href="#adr" class="headerlink" title="adr"></a>adr</h3><p>计算 标签（Label）的地址 并将其加载到目标寄存器。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ADR &lt;Rd&gt;, &lt;label&gt;</span><br></pre></td></tr></table></figure>



<h3 id="sub"><a href="#sub" class="headerlink" title="sub"></a>sub</h3><p>减法</p>
<h3 id="mul"><a href="#mul" class="headerlink" title="mul"></a>mul</h3><p><code>MUL</code> 指令用于无符号乘法。它将两个寄存器的值相乘，并将结果存储在目标寄存器中。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MUL destination, operand1, operand2</span><br></pre></td></tr></table></figure>



<h3 id="muls"><a href="#muls" class="headerlink" title="muls"></a>muls</h3><p><code>MULS</code> 与 <code>MUL</code> 指令类似，但是它还会更新条件码（N, Z, C, V），即用于设置 ARM 标志寄存器的状态。用于无符号乘法，格式和 <code>MUL</code> 类似。</p>
<h3 id="mla"><a href="#mla" class="headerlink" title="mla"></a>mla</h3><p><code>MLA</code> 指令用于乘法累加操作，即将两个数相乘后将结果加到一个寄存器上。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MLA destination, operand1, operand2, operand3</span><br></pre></td></tr></table></figure>



<h3 id="sdiv-udiv"><a href="#sdiv-udiv" class="headerlink" title="sdiv&#x2F;udiv"></a>sdiv&#x2F;udiv</h3><p>除法</p>
<h2 id="移位和循环移位"><a href="#移位和循环移位" class="headerlink" title="移位和循环移位"></a>移位和循环移位</h2><h3 id="lsl（Logical-Shift-Left）"><a href="#lsl（Logical-Shift-Left）" class="headerlink" title="lsl（Logical Shift Left）"></a>lsl（Logical Shift Left）</h3><p>逻辑左移，左移后相当于乘以 2 的若干次方。</p>
<p>将一个值的二进制位整体向左移动，用 <strong>0</strong> 填充右边空出的位，丢弃左边溢出的位。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsl r0,r1,#2  ;r0 = r1 &lt;&lt; 2</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add r0,r1,r2,lsl #2  ;r0 = r1 + (r2&lt;&lt;2)</span><br></pre></td></tr></table></figure>



<h3 id="lsr（Logical-Shift-Right）"><a href="#lsr（Logical-Shift-Right）" class="headerlink" title="lsr（Logical Shift Right）"></a>lsr（Logical Shift Right）</h3><p>逻辑右移，逻辑右移后，每位的值变成原来数值的 <strong>1&#x2F;2</strong>。</p>
<p>左侧空出的位用 0 填充，右侧移出的位被丢弃。</p>
<h3 id="asr（Arithmetic-Shift-Left）"><a href="#asr（Arithmetic-Shift-Left）" class="headerlink" title="asr（Arithmetic Shift Left）"></a>asr（Arithmetic Shift Left）</h3><p>算术右移</p>
<p>将一个值的二进制位整体向右移动。它与逻辑右移的主要区别在于，左侧空出的位用符号位填充（最高位的值，0 或 1），以保持数值的符号不变。</p>
<h3 id="rrx"><a href="#rrx" class="headerlink" title="rrx"></a>rrx</h3><p>带扩展的循环右移</p>
<p>在普通 <code>ROR</code> 的基础上，利用 <strong>进位标志位（C）</strong> 的值作为循环右移的高位，右移后最右侧的位会填入进位标志位（<code>C</code>）</p>
<ul>
<li>始终右移 1 位</li>
<li>进位标志位参与操作</li>
</ul>
<h2 id="逻辑运算"><a href="#逻辑运算" class="headerlink" title="逻辑运算"></a>逻辑运算</h2><h3 id="AND"><a href="#AND" class="headerlink" title="AND"></a>AND</h3><p>位与</p>
<h3 id="ORR"><a href="#ORR" class="headerlink" title="ORR"></a>ORR</h3><p>将两个操作数的每一位进行逻辑或，结果写入目标寄存器。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ORR &lt;Wd&gt;, &lt;Wn&gt;, &lt;Wm&gt;&#123;, &lt;shift&gt; #&lt;amount&gt;&#125;  // 32位操作</span><br><span class="line">ORR &lt;Xd&gt;, &lt;Xn&gt;, &lt;Xm&gt;&#123;, &lt;shift&gt; #&lt;amount&gt;&#125;  // 64位操作</span><br></pre></td></tr></table></figure>

<h3 id="EOR（Exclusive-OR）"><a href="#EOR（Exclusive-OR）" class="headerlink" title="EOR（Exclusive OR）"></a>EOR（Exclusive OR）</h3><p>按位异或</p>
<h3 id="LSR（Logical-Shift-Right）"><a href="#LSR（Logical-Shift-Right）" class="headerlink" title="LSR（Logical Shift Right）"></a>LSR（<strong>Logical Shift Right</strong>）</h3><p>逻辑右移指令，用于将寄存器中的数值向右移动指定的位数，高位补零。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LSR&#123;S&#125;&#123;cond&#125; Rd, Rm, #imm      @ 立即数移位</span><br><span class="line">LSR&#123;S&#125;&#123;cond&#125; Rd, Rm, Rs       @ 寄存器指定移位量</span><br></pre></td></tr></table></figure>

<p>示例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MOV R0, #16         @ R0 = 16</span><br><span class="line">LSR R1, R0, #2      @ R1 = 16 / 4 = 4</span><br></pre></td></tr></table></figure>

<h3 id="UBFIZ-Unsigned-Bitfield-Insert-and-Zero"><a href="#UBFIZ-Unsigned-Bitfield-Insert-and-Zero" class="headerlink" title="UBFIZ (Unsigned Bitfield Insert and Zero)"></a>UBFIZ (Unsigned Bitfield Insert and Zero)</h3><p>是 ARM 架构中的一个位域操作指令。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">UBFIZ Wd, Wn, #lsb, #width   // 32位寄存器版本</span><br><span class="line">UBFIZ Xd, Xn, #lsb, #width   // 64位寄存器版本</span><br><span class="line"></span><br><span class="line">Wd/Xd：目标寄存器</span><br><span class="line">Wn/Xn：源寄存器</span><br><span class="line">lsb：目标中的最低有效位位置（左移量）</span><br><span class="line">width：要插入的位数</span><br></pre></td></tr></table></figure>

<ul>
<li><p>将源寄存器 Wn&#x2F;Xn 的低 width 位向左移动 lsb 位</p>
</li>
<li><p>将结果放入目标寄存器 Wd&#x2F;Xd</p>
</li>
<li><p>目标寄存器中的其他位都设置为 0</p>
</li>
</ul>
<h2 id="条件指令"><a href="#条件指令" class="headerlink" title="条件指令"></a>条件指令</h2><h3 id="cmp"><a href="#cmp" class="headerlink" title="cmp"></a>cmp</h3><p>比较</p>
<h3 id="TST"><a href="#TST" class="headerlink" title="TST"></a>TST</h3><p>用于按位测试两个操作数的逻辑与（AND）结果，并根据结果更新条件标志（Condition Flags），但不会修改任何寄存器的值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TST&#123;cond&#125; Rn, Operand2</span><br></pre></td></tr></table></figure>

<p>根据 <code>AND</code> 操作的结果更新以下标志位：</p>
<ul>
<li>N (Negative)：结果的最高位（符号位）为1时置位。</li>
<li>Z (Zero)：结果为0时置位。</li>
<li>C (Carry) 和 V (Overflow)：不受影响（除非 <code>Operand2</code> 包含移位操作）。</li>
</ul>
<h2 id="移动指令"><a href="#移动指令" class="headerlink" title="移动指令"></a>移动指令</h2><h3 id="mov"><a href="#mov" class="headerlink" title="mov"></a>mov</h3><p>用于将值从一个寄存器传递到另一个寄存器，或者将一个立即数加载到目标寄存器。</p>
<h3 id="movz"><a href="#movz" class="headerlink" title="movz"></a>movz</h3><p>将一个 16 位立即数 加载到目标寄存器的指定位置，并将其他位清零。</p>
<h3 id="movk"><a href="#movk" class="headerlink" title="movk"></a>movk</h3><p>将一个 16 位立即数 加载到目标寄存器的指定位置，但保持寄存器中其他位的原值不变。</p>
<h3 id="movn"><a href="#movn" class="headerlink" title="movn"></a>movn</h3><p>将一个 16 位立即数的按位取反值 加载到目标寄存器的指定位置，并将其他位清零。</p>
<h3 id="MVN"><a href="#MVN" class="headerlink" title="MVN"></a>MVN</h3><p>将 源操作数（Source Operand） 的每一位取反（0→1，1→0），并将结果存入 目标寄存器。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MVN&#123;&lt;cond&gt;&#125;&#123;S&#125; &lt;Rd&gt;, &lt;Operand&gt;</span><br></pre></td></tr></table></figure>



<h1 id="内存访问指令"><a href="#内存访问指令" class="headerlink" title="内存访问指令"></a>内存访问指令</h1><h2 id="加载和存储指令"><a href="#加载和存储指令" class="headerlink" title="加载和存储指令"></a>加载和存储指令</h2><h3 id="LDR（Load-Register）"><a href="#LDR（Load-Register）" class="headerlink" title="LDR（Load Register）"></a>LDR（Load Register）</h3><p>从内存地址加载一个字（通常是32位）到指定的寄存器中。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LDR R0, [R1]      ; 将内存地址R1中的值加载到寄存器R0</span><br><span class="line">LDR R2, [R3, #4]  ; 将R3 + 4地址中的值加载到寄存器R2</span><br></pre></td></tr></table></figure>

<h3 id="LDRB（Load-Register-Byte）"><a href="#LDRB（Load-Register-Byte）" class="headerlink" title="LDRB（Load Register Byte）"></a>LDRB（Load Register Byte）</h3><p>从内存中加载一个字节（8位）到寄存器，并将该字节零扩展（Zero-Extend）为32位。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LDRB&#123;cond&#125;&#123;B&#125; Rt, [Rn, Operand2]&#123;!&#125;</span><br><span class="line">LDRB&#123;cond&#125;&#123;B&#125; Rt, [Rn], Operand2</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LDR R1, =buffer     @ R1指向缓冲区首地址</span><br><span class="line">LDRB R0, [R1]       @ 从缓冲区加载第一个字节到R0（零扩展为32位）</span><br></pre></td></tr></table></figure>

<h3 id="LDP（Load-Pair-of-Registers）"><a href="#LDP（Load-Pair-of-Registers）" class="headerlink" title="LDP（Load Pair of Registers）"></a>LDP（Load Pair of Registers）</h3><p>一条高效的双寄存器加载指令，用于从内存中连续加载两个寄存器的值</p>
<h3 id="LDUR（Load-Unscaled-Register）"><a href="#LDUR（Load-Unscaled-Register）" class="headerlink" title="LDUR（Load Unscaled Register）"></a>LDUR（Load Unscaled Register）</h3><p>是一条用于从内存加载数据到寄存器的指令。它与常见的 <code>LDR</code>（Load Register）指令类似，但在偏移量范围和寻址模式上有特殊设计。</p>
<p>从 基址寄存器 (<code>Xn</code> 或 <code>SP</code>) + 偏移量 (<code>simm</code>) 的内存地址加载数据到目标寄存器。</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SUB</span> <span class="built_in">SP</span>, <span class="built_in">SP</span>, <span class="number">#32</span>       <span class="comment">// 分配栈空间</span></span><br><span class="line"><span class="keyword">STR</span> <span class="built_in">X0</span>, [<span class="built_in">SP</span>, <span class="number">#16</span>]     <span class="comment">// 存储变量到栈</span></span><br><span class="line"><span class="symbol">LDUR</span> <span class="built_in">X1</span>, [<span class="built_in">SP</span>, <span class="number">#16</span>]    <span class="comment">// 从栈加载变量（偏移量为正）</span></span><br><span class="line"><span class="symbol">LDUR</span> <span class="built_in">X2</span>, [<span class="built_in">SP</span>, #-<span class="number">8</span>]    <span class="comment">// 加载 SP 之前的内存数据（偏移量为负）</span></span><br></pre></td></tr></table></figure>

<h3 id="LDRSW（Load-Register-Signed-Word）"><a href="#LDRSW（Load-Register-Signed-Word）" class="headerlink" title="LDRSW（Load Register Signed Word）"></a>LDRSW（Load Register Signed Word）</h3><p>用于从内存中加载 32 位有符号整数，并将其符号扩展至 64 位目标寄存器。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LDRSW &lt;Xd&gt;, [&lt;Xn|SP&gt;&#123;, #&lt;pimm&gt;&#125;]   ; 立即数偏移模式</span><br><span class="line">LDRSW &lt;Xd&gt;, [&lt;Xn|SP&gt;, &lt;Xm&gt;&#123;, &lt;extend&gt; &#123;#&lt;amount&gt;&#125;&#125;]  ; 寄存器偏移模式</span><br></pre></td></tr></table></figure>



<h3 id="STR（Store-Register）"><a href="#STR（Store-Register）" class="headerlink" title="STR（Store Register）"></a>STR（Store Register）</h3><p>将寄存器中的数据存储到内存地址中。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">STR R0, [R1]      ; 将寄存器R0的值存储到R1指向的内存地址</span><br><span class="line">STR R2, [R3, #8]  ; 将R2的值存储到R3 + 8的内存地址</span><br></pre></td></tr></table></figure>

<h3 id="STRB（Store-Register-Byte）"><a href="#STRB（Store-Register-Byte）" class="headerlink" title="STRB（Store Register Byte）"></a>STRB（Store Register Byte）</h3><p>将寄存器中的低8位数据（一个字节）存储到内存中。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">STRB&#123;cond&#125;&#123;B&#125; Rt, [Rn, Operand2]&#123;!&#125;</span><br><span class="line">STRB&#123;cond&#125;&#123;B&#125; Rt, [Rn], Operand2</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MOV R0, #&#x27;A&#x27;        @ R0 = ASCII字符&#x27;A&#x27;（0x41）</span><br><span class="line">LDR R1, =buffer     @ R1指向缓冲区首地址</span><br><span class="line">STRB R0, [R1]       @ 将&#x27;A&#x27;存储到缓冲区</span><br></pre></td></tr></table></figure>

<h3 id="STP（Store-Pair）"><a href="#STP（Store-Pair）" class="headerlink" title="STP（Store Pair）"></a>STP（Store Pair）</h3><p>将 两个寄存器 的值存储到 连续的内存地址 中。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">STP &lt;寄存器1&gt;, &lt;寄存器2&gt;, [&lt;基址寄存器&gt;&#123;, #偏移量&#125;]</span><br></pre></td></tr></table></figure>

<p>示例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">STP X0, X1, [X2]        ; 将X0存入X2，X1存入X2+8</span><br><span class="line">STP W3, W4, [SP, #-8]!  ; 前变址：SP减8，存入W3和W4（32位，占8字节）</span><br><span class="line">STP X5, X6, [X7, #16]   ; 将X5存入X7+16，X6存入X7+24</span><br></pre></td></tr></table></figure>



<h3 id="EXTR（Extract-Register）"><a href="#EXTR（Extract-Register）" class="headerlink" title="EXTR（Extract Register）"></a>EXTR（Extract Register）</h3><p>是一条用于 提取寄存器位域 的指令。它可以从两个寄存器的组合位域中提取指定范围的位，并将结果存入目标寄存器。</p>
<h1 id="控制流"><a href="#控制流" class="headerlink" title="控制流"></a>控制流</h1><h2 id="分支指令"><a href="#分支指令" class="headerlink" title="分支指令"></a>分支指令</h2><h3 id="B（Branch）"><a href="#B（Branch）" class="headerlink" title="B（Branch）"></a>B（Branch）</h3><p>B指令用于无条件跳转到一个由立即数偏移指定的目标地址。</p>
<p>执行该指令时，程序计数器（PC）被更新为目标地址，从而实现流程的跳转。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">;无条件跳转到标签label</span><br><span class="line">B label  ; 无条件跳转到标签label指定的 label</span><br></pre></td></tr></table></figure>

<h3 id="BX（Branch-and-Exchange）"><a href="#BX（Branch-and-Exchange）" class="headerlink" title="BX（Branch and Exchange）"></a>BX（Branch and Exchange）</h3><p>BX 指令用于从一个寄存器中取得目标地址并跳转，并且可以用于 ARM 和 Thumb 模式之间的切换。</p>
<p>它会检查目标地址的最低位：</p>
<ul>
<li>如果最低位为 <strong>1</strong>，则表示需要进入 Thumb 模式；</li>
<li>如果最低位为 <strong>0</strong>，则保持在 ARM 模式。</li>
</ul>
<p>常用于子程序返回（例如：<code>BX LR</code>）；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BX LR  ; 使用链接寄存器 LR 跳转，通常用于返回。</span><br></pre></td></tr></table></figure>

<h3 id="BL（Branch-with-Link）"><a href="#BL（Branch-with-Link）" class="headerlink" title="BL（Branch with Link）"></a>BL（Branch with Link）</h3><p>用于调用子程序。</p>
<p>BL 指令除了进行跳转外，还会将返回地址（即 BL 指令下一条指令的地址）保存到链接寄存器 LR中。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BL function  ; 调用 function 子程序，并将返回地址保存到 LR</span><br></pre></td></tr></table></figure>

<h3 id="BR"><a href="#BR" class="headerlink" title="BR"></a>BR</h3><p>BR 指令出现在 ARMv8 的 AArch64 指令集中，用于实现从寄存器中取得目标地址进行无条件跳转。</p>
<p>与 BX 指令类似，BR 指令也是基于寄存器的跳转，但不涉及状态交换（因为 AArch64 不存在 ARM&#x2F;Thumb 模式之分）。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 示例1：通过寄存器 X1 中的地址跳转</span><br><span class="line">MOV X1, #0x4000      // 将目标地址 0x4000 存入 X1</span><br><span class="line">BR X1                // 跳转到 X1 中的地址</span><br><span class="line"></span><br><span class="line">// 示例2：从子程序返回（在 AArch64 中常用 RET 指令，但也可使用 BR）</span><br><span class="line">// 假设链接寄存器在 X30 中</span><br><span class="line">BR X30               // 跳转到 X30 保存的返回地址</span><br></pre></td></tr></table></figure>

<h3 id="CBZ（Compare-and-Branch-on-Zero）"><a href="#CBZ（Compare-and-Branch-on-Zero）" class="headerlink" title="CBZ（Compare and Branch on Zero）"></a>CBZ（Compare and Branch on Zero）</h3><p>根据寄存器的值是否为<strong>零</strong>来决定是否跳转到目标地址。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CBZ  Rn, label</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>当 <code>Rn == 0</code> 时</strong>：程序跳转到 <code>label</code> 处执行。</li>
<li><strong>当 <code>Rn ≠ 0</code> 时</strong>：继续顺序执行下一条指令。</li>
</ul>
<h3 id="CBNZ（Compare-and-Branch-on-Non-Zero）"><a href="#CBNZ（Compare-and-Branch-on-Non-Zero）" class="headerlink" title="CBNZ（Compare and Branch on Non-Zero）"></a>CBNZ（Compare and Branch on Non-Zero）</h3><p>检测寄存器是否非零并决定是否跳转。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CBNZ  Rn, label</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>当 <code>Rn ≠ 0</code> 时</strong>：跳转到 <code>label</code> 执行。</li>
<li><strong>当 <code>Rn = 0</code> 时</strong>：顺序执行下一条指令。</li>
</ul>
<h3 id="B-NE"><a href="#B-NE" class="headerlink" title="B.NE"></a>B.NE</h3><p>条件分支指令，当处理器状态寄存器（PSTATE）中的 Z（Zero）标志为0 时跳转到指定地址。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">B.NE label</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>当 Z &#x3D; 0 时</strong>：跳转到 <code>label</code> 执行。</li>
<li><strong>当 Z &#x3D; 1 时</strong>：顺序执行下一条指令。</li>
</ul>
<h1 id="指令大全"><a href="#指令大全" class="headerlink" title="指令大全"></a>指令大全</h1><h2 id="MVN（Move-Not）"><a href="#MVN（Move-Not）" class="headerlink" title="MVN（Move Not）"></a>MVN（Move Not）</h2><p>是一条逻辑运算指令，用于对源操作数进行 按位取反 操作，并将结果存入目标寄存器。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MVN X0, X1  ; X0 = ~X1</span><br></pre></td></tr></table></figure>

<h2 id="ROR（Rotate-Right）"><a href="#ROR（Rotate-Right）" class="headerlink" title="ROR（Rotate Right）"></a>ROR（Rotate Right）</h2><p>循环右移</p>
<p>将一个二进制数的位向右移动指定的位数，并将被“移出”的位重新填充到左侧。</p>
<p><strong>固定位宽循环右移</strong></p>
<p>操作数<code>num</code>为 <code>n</code> 位的整数，循环右移 <code>k</code> 位：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">ror</span>(<span class="params">num: <span class="built_in">int</span>, k: <span class="built_in">int</span>, bits: <span class="built_in">int</span> = <span class="number">32</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">    k = k % bits  <span class="comment"># 处理 k ≥ bits 的情况</span></span><br><span class="line">    mask = (<span class="number">1</span> &lt;&lt; bits) - <span class="number">1</span>  <span class="comment"># 生成指定位数的掩码（如 32 位掩码 0xFFFFFFFF）</span></span><br><span class="line">    num &amp;= mask  <span class="comment"># 确保数值在指定位宽范围内</span></span><br><span class="line">    right = num &gt;&gt; k  <span class="comment"># 右移 k 位</span></span><br><span class="line">    left = num &lt;&lt; (bits - k)  <span class="comment"># 左移补位</span></span><br><span class="line">    <span class="keyword">return</span> (left | right) &amp; mask</span><br></pre></td></tr></table></figure>

<h2 id="EON（Exclusive-OR-Not）"><a href="#EON（Exclusive-OR-Not）" class="headerlink" title="EON（Exclusive OR Not）"></a>EON（Exclusive OR Not）</h2><p>是一条按位逻辑运算指令，用于执行 异或非（XOR-NOT）操作。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Xn ^ (~Xm)</span><br></pre></td></tr></table></figure>

<h2 id="UXTW（Unsigned-Extend-Word-to-Doubleword）"><a href="#UXTW（Unsigned-Extend-Word-to-Doubleword）" class="headerlink" title="UXTW（Unsigned Extend Word to Doubleword）"></a>UXTW（Unsigned Extend Word to Doubleword）</h2><p><code>UXTW</code> 是一个用于 无符号扩展（Unsigned Extend） 的操作符</p>
<p>它的作用是将一个 32 位寄存器（W寄存器） 的值无符号扩展到 64 位（X寄存器），并可用于地址计算或算术运算。</p>
<p><strong>核心功能</strong></p>
<ul>
<li><strong>无符号扩展</strong>：将 32 位 <code>W</code> 寄存器的值 <strong>无符号扩展</strong> 为 64 位，高位补零。</li>
<li><strong>移位操作</strong>：可对扩展后的值进行左移（如 <code>UXTW #2</code> 表示左移 2 位）。</li>
<li><strong>典型用途</strong>：在地址计算或算术运算中，将 32 位索引或偏移量扩展为 64 位。</li>
</ul>
<h2 id="SXTW（Sign-Extend-Word）"><a href="#SXTW（Sign-Extend-Word）" class="headerlink" title="SXTW（Sign Extend Word）"></a>SXTW（Sign Extend Word）</h2><p>是一种 扩展修饰符，用于将 32 位寄存器（<code>W</code> 寄存器）的值 有符号扩展** 为 64 位，通常与其他指令（如 <code>ADD</code>、<code>LDR</code> 等）结合使用。</p>
<p> <strong>核心功能</strong></p>
<ul>
<li><strong>有符号扩展</strong>：将 32 位 <code>W</code> 寄存器的值 <strong>有符号扩展</strong> 为 64 位，高位补符号位（<code>0</code> 或 <code>1</code>）。</li>
<li><strong>移位操作</strong>：可对扩展后的值进行左移（如 <code>SXTW #2</code> 表示左移 2 位）。</li>
<li><strong>典型用途</strong>：在地址计算或算术运算中，将 32 位有符号索引或偏移量扩展为 64 位。</li>
</ul>
<h2 id="BFXIL（Bit-Field-Extract-and-Insert-Low）"><a href="#BFXIL（Bit-Field-Extract-and-Insert-Low）" class="headerlink" title="BFXIL（Bit Field Extract and Insert Low）"></a>BFXIL（Bit Field Extract and Insert Low）</h2><p>是一条 位域操作指令，用于从源寄存器中提取一个位域，并将其插入到目标寄存器的 低有效位部分。</p>
<ol>
<li>从源寄存器 <code>&lt;Xn&gt;</code> 的 <code>[lsb, lsb + width - 1]</code> 位提取一个位域。</li>
<li>将该位域插入到目标寄存器 <code>&lt;Xd&gt;</code> 的 <code>[0, width - 1]</code> 位（低有效位部分）。</li>
<li>目标寄存器的高位（<code>[width, 63]</code> 或 <code>[width, 31]</code>）保持不变。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Xd[width-1:0] = Xn[lsb+width-1:lsb]  // 低 width 位被替换</span><br><span class="line">Xd[63:width] 保持不变                 // 高位不变</span><br></pre></td></tr></table></figure>

<p>示例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&quot;bfxil w30, w24, #3, #5&quot; w30=0xffff9480 w24=0xfffffca4 =&gt; w30=0xffff9494</span><br><span class="line"></span><br><span class="line">W30 = 0xFFFF9480	bin:11111111 11111111 10010100 10000000</span><br><span class="line">W24 = 0xFFFFFCA4	bin:11111111 11111111 11111100 10100100</span><br><span class="line"></span><br><span class="line">起始位 lsb = 3, 宽度 width = 5</span><br><span class="line">提取 W24 的 [3:7] 位 </span><br><span class="line">从右向左数，最低位为 0 : 10100</span><br><span class="line"></span><br><span class="line">插入目标位域：[4:0]</span><br><span class="line">低 8 位更新为：10010100（0x94）</span><br><span class="line">w30 = 0xffff9494</span><br></pre></td></tr></table></figure>



<p><strong>Python实现</strong></p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">bfxil_visual</span>(<span class="params">dest, src, lsb, width, is_64bit=<span class="literal">False</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    更具可视化的BFXIL实现，展示中间步骤</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    参数:</span></span><br><span class="line"><span class="string">    dest - 目标值</span></span><br><span class="line"><span class="string">    src - 源值</span></span><br><span class="line"><span class="string">    lsb - 源中的起始位位置</span></span><br><span class="line"><span class="string">    width - 提取的位宽</span></span><br><span class="line"><span class="string">    is_64bit - 是否为64位操作，默认为False(32位)</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    返回:</span></span><br><span class="line"><span class="string">    更新后的dest值</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 确定操作位宽</span></span><br><span class="line">    max_bits = <span class="number">64</span> <span class="keyword">if</span> is_64bit <span class="keyword">else</span> <span class="number">32</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 显示输入值</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;源值(src)      = <span class="subst">&#123;<span class="built_in">bin</span>(src)[<span class="number">2</span>:].zfill(max_bits)&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;目标值(dest)    = <span class="subst">&#123;<span class="built_in">bin</span>(dest)[<span class="number">2</span>:].zfill(max_bits)&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;lsb           = <span class="subst">&#123;lsb&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;width         = <span class="subst">&#123;width&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 步骤1: 创建源掩码并提取位</span></span><br><span class="line">    src_mask = ((<span class="number">1</span> &lt;&lt; width) - <span class="number">1</span>) &lt;&lt; lsb</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;源掩码         = <span class="subst">&#123;<span class="built_in">bin</span>(src_mask)[<span class="number">2</span>:].zfill(max_bits)&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    extracted_with_position = src &amp; src_mask</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;提取的位(带位置) = <span class="subst">&#123;<span class="built_in">bin</span>(extracted_with_position)[<span class="number">2</span>:].zfill(max_bits)&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    extracted = (extracted_with_position &gt;&gt; lsb)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;提取的位(移位后) = <span class="subst">&#123;<span class="built_in">bin</span>(extracted)[<span class="number">2</span>:].zfill(max_bits)&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 步骤2: 创建目标掩码并清除低位</span></span><br><span class="line">    dest_mask = ~((<span class="number">1</span> &lt;&lt; width) - <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> is_64bit:</span><br><span class="line">        dest_mask &amp;= <span class="number">0xFFFFFFFF</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;目标掩码       = <span class="subst">&#123;<span class="built_in">bin</span>(dest_mask)[<span class="number">2</span>:].zfill(max_bits)&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    dest_cleared = dest &amp; dest_mask</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;目标(清除低位)  = <span class="subst">&#123;<span class="built_in">bin</span>(dest_cleared)[<span class="number">2</span>:].zfill(max_bits)&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 步骤3: 合并结果</span></span><br><span class="line">    result = dest_cleared | extracted</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;最终结果       = <span class="subst">&#123;<span class="built_in">bin</span>(result)[<span class="number">2</span>:].zfill(max_bits)&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> is_64bit:</span><br><span class="line">        result &amp;= <span class="number">0xFFFFFFFF</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bfxil</span>(<span class="params">dest, src, lsb, width, is_64bit=<span class="literal">False</span></span>):</span><br><span class="line">    max_bits = <span class="number">64</span> <span class="keyword">if</span> is_64bit <span class="keyword">else</span> <span class="number">32</span></span><br><span class="line">    src_mask = ((<span class="number">1</span> &lt;&lt; width) - <span class="number">1</span>) &lt;&lt; lsb</span><br><span class="line">    extracted_with_position = src &amp; src_mask</span><br><span class="line">    extracted = (extracted_with_position &gt;&gt; lsb)</span><br><span class="line">    dest_mask = ~((<span class="number">1</span> &lt;&lt; width) - <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> is_64bit:</span><br><span class="line">        dest_mask &amp;= <span class="number">0xFFFFFFFF</span></span><br><span class="line">    dest_cleared = dest &amp; dest_mask</span><br><span class="line">    result = dest_cleared | extracted</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> is_64bit:</span><br><span class="line">        result &amp;= <span class="number">0xFFFFFFFF</span></span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hex</span>(bfxil(<span class="number">0xffff9480</span>,<span class="number">0xfffffca4</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="literal">False</span>)))</span><br></pre></td></tr></table></figure>

<h2 id="BFI（Bit-Field-Insert）"><a href="#BFI（Bit-Field-Insert）" class="headerlink" title="BFI（Bit Field Insert）"></a>BFI（Bit Field Insert）</h2><p>是 ARM AArch64 架构中的 位域插入指令，用于将源寄存器的指定位域插入到目标寄存器的任意位置，同时保持目标寄存器其他位不变。</p>
<ol>
<li><strong>从源寄存器提取 <code>width</code> 位</strong>（最低有效位开始）。</li>
<li><strong>插入到目标寄存器的 <code>[lsb, lsb + width - 1]</code> 位</strong>。</li>
<li><strong>目标寄存器其他位保持不变</strong>。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Xd[lsb + width - 1 : lsb] = Xn[width - 1 : 0]</span><br><span class="line">Xd[其他位] 保持不变</span><br></pre></td></tr></table></figure>

<p>示例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">0x120a0684: &quot;bfi w30, w24, #6, #8&quot; w30=0x2 w24=0xa =&gt; w30=0x282</span><br><span class="line"></span><br><span class="line">从 W24 提取 8 位（#8）</span><br><span class="line">提取最低 8 位（[7:0]）：00001010（0xA）</span><br><span class="line"></span><br><span class="line">插入到 W30 的 [6:13] 位（#6 + #8）</span><br><span class="line">目标寄存器 W30 = 0x2（00000010）</span><br><span class="line">插入后：1010000010 （0x282）</span><br></pre></td></tr></table></figure>



<p><strong>Python实现</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">bfi_visual</span>(<span class="params">dest, src, lsb, width, is_64bit=<span class="literal">False</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    更具可视化的BFI实现，展示中间步骤</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    参数:</span></span><br><span class="line"><span class="string">    dest - 目标值</span></span><br><span class="line"><span class="string">    src - 源值</span></span><br><span class="line"><span class="string">    lsb - 目标中的起始位位置</span></span><br><span class="line"><span class="string">    width - 插入的位宽</span></span><br><span class="line"><span class="string">    is_64bit - 是否为64位操作，默认为False(32位)</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    返回:</span></span><br><span class="line"><span class="string">    更新后的dest值</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 确定操作位宽</span></span><br><span class="line">    max_bits = <span class="number">64</span> <span class="keyword">if</span> is_64bit <span class="keyword">else</span> <span class="number">32</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 显示输入值</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;源值(src)       = <span class="subst">&#123;<span class="built_in">bin</span>(src)[<span class="number">2</span>:].zfill(max_bits)&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;目标值(dest)    = <span class="subst">&#123;<span class="built_in">bin</span>(dest)[<span class="number">2</span>:].zfill(max_bits)&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;lsb            = <span class="subst">&#123;lsb&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;width          = <span class="subst">&#123;width&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 步骤1: 创建源掩码并提取位</span></span><br><span class="line">    src_mask = (<span class="number">1</span> &lt;&lt; width) - <span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;源掩码          = <span class="subst">&#123;<span class="built_in">bin</span>(src_mask)[<span class="number">2</span>:].zfill(max_bits)&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    src_bits = src &amp; src_mask</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;提取的源位      = <span class="subst">&#123;<span class="built_in">bin</span>(src_bits)[<span class="number">2</span>:].zfill(max_bits)&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 步骤2: 创建目标掩码</span></span><br><span class="line">    insert_mask = src_mask &lt;&lt; lsb</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;插入位置掩码    = <span class="subst">&#123;<span class="built_in">bin</span>(insert_mask)[<span class="number">2</span>:].zfill(max_bits)&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    dest_mask = ~insert_mask</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> is_64bit:</span><br><span class="line">        dest_mask &amp;= <span class="number">0xFFFFFFFF</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;目标掩码        = <span class="subst">&#123;<span class="built_in">bin</span>(dest_mask)[<span class="number">2</span>:].zfill(max_bits)&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 步骤3: 清除目标中对应位置</span></span><br><span class="line">    dest_cleared = dest &amp; dest_mask</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;目标(已清除位)  = <span class="subst">&#123;<span class="built_in">bin</span>(dest_cleared)[<span class="number">2</span>:].zfill(max_bits)&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 步骤4: 将源位移到正确位置</span></span><br><span class="line">    src_positioned = src_bits &lt;&lt; lsb</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;源位(定位后)    = <span class="subst">&#123;<span class="built_in">bin</span>(src_positioned)[<span class="number">2</span>:].zfill(max_bits)&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 步骤5: 合并结果</span></span><br><span class="line">    result = dest_cleared | src_positioned</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;最终结果        = <span class="subst">&#123;<span class="built_in">bin</span>(result)[<span class="number">2</span>:].zfill(max_bits)&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> is_64bit:</span><br><span class="line">        result &amp;= <span class="number">0xFFFFFFFF</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bfi</span>(<span class="params">dest, src, lsb, width, is_64bit=<span class="literal">False</span></span>):</span><br><span class="line">    max_bits = <span class="number">64</span> <span class="keyword">if</span> is_64bit <span class="keyword">else</span> <span class="number">32</span></span><br><span class="line">    src_mask = (<span class="number">1</span> &lt;&lt; width) - <span class="number">1</span></span><br><span class="line">    src_bits = src &amp; src_mask</span><br><span class="line">    insert_mask = src_mask &lt;&lt; lsb</span><br><span class="line">    dest_mask = ~insert_mask</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> is_64bit:</span><br><span class="line">        dest_mask &amp;= <span class="number">0xFFFFFFFF</span></span><br><span class="line">    dest_cleared = dest &amp; dest_mask</span><br><span class="line">    src_positioned = src_bits &lt;&lt; lsb</span><br><span class="line">    result = dest_cleared | src_positioned</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> is_64bit:</span><br><span class="line">        result &amp;= <span class="number">0xFFFFFFFF</span></span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hex</span>(bfi(<span class="number">0x2</span>,<span class="number">0xa</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="literal">True</span>)))</span><br></pre></td></tr></table></figure>


    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/ARM%E6%B1%87%E7%BC%96/" rel="tag"><svg t="1732789072752" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4858" width="15" height="15"><path d="M229.443715 343.118259l565.172804 0 0 410.010794c0 37.525595-30.237317 67.762912-67.040108 67.762912l-46.319715 0 0 139.742183c0 35.116247-28.249605 63.365852-63.305618 63.365852-35.116247 0-63.546553-28.309839-63.546553-63.365852l0-139.742183-84.809049 0 0 139.742183c0 35.056013-28.430306 63.365852-63.546553 63.365852-34.393443 0-62.763515-28.309839-62.763515-63.365852l-0.542103-139.742183-45.596911 0c-37.465361 0-67.702678-30.177084-67.702678-67.762912l0-410.010794zM141.984383 331.432921c-35.056013 0-63.426086 28.370073-63.426086 62.763515l0 264.787344c0 35.116247 28.370073 63.365852 63.426086 63.365852s62.763515-28.309839 62.763515-63.365852l0-264.787344c0-34.393443-28.189371-62.763515-62.763515-62.763515zM796.42353 320.952257l-569.449397 0c0-97.879762 58.547156-182.869512 145.343917-227.141282l-43.7899-80.59269c-2.469582-4.336826-1.264908-9.878327 3.071919-12.347908 4.276593-1.867245 9.878327-0.662571 12.347908 3.734489l44.271769 81.255261c37.646062-16.684735 79.508484-25.900491 123.780253-25.900491s86.134191 9.215756 123.780253 25.840257l44.271769-81.255261c2.469582-4.336826 8.071316-5.5415 12.347908-3.734489 4.336826 2.469582 5.5415 8.011082 3.071919 12.347908l-43.7899 80.59269c86.254658 44.332003 144.74158 129.321753 144.74158 227.201515zM406.048922 194.160319c0-12.950245-10.42043-24.033246-23.912779-24.033246-13.010479 0-23.430909 11.083001-23.430909 24.033246 0 12.890012 10.42043 23.973012 23.430909 23.973012 13.492349 0.060234 23.912779-11.022767 23.912779-23.973012zM665.294766 194.160319c0-12.950245-10.42043-24.033246-23.430909-24.033246-13.552582 0-23.912779 11.083001-23.912779 24.033246 0 12.890012 10.42043 23.973012 23.912779 23.973012 13.010479 0.060234 23.430909-11.022767 23.430909-23.973012zM882.015617 331.432921c-34.51391 0-62.763515 27.707502-62.763515 62.763515l0 264.787344c0 35.116247 28.249605 63.365852 62.763515 63.365852 35.056013 0 63.426086-28.309839 63.426086-63.365852l0-264.787344c-0.060234-35.056013-28.370073-62.763515-63.426086-62.763515z" fill="#000000" p-id="4859"></path></svg> ARM汇编</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2024/12/15/Python%E5%9F%BA%E7%A1%80/" rel="prev" title="Python基础">
      <i class="fa fa-chevron-left"></i> Python基础
    </a></div>
      <div class="post-nav-item">
    <a href="/2024/12/19/LSPosed%E5%BC%80%E5%8F%91/" rel="next" title="LSPosed开发">
      LSPosed开发 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#ARM%E6%9E%B6%E6%9E%84"><span class="nav-number">1.</span> <span class="nav-text">ARM架构</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ARMv8-A"><span class="nav-number">1.1.</span> <span class="nav-text">ARMv8-A</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8C%87%E4%BB%A4%E9%9B%86%E6%9E%B6%E6%9E%84"><span class="nav-number">1.2.</span> <span class="nav-text">指令集架构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#AArch64%EF%BC%8864%E4%BD%8D%E6%A8%A1%E5%BC%8F%EF%BC%89"><span class="nav-number">1.2.1.</span> <span class="nav-text">AArch64（64位模式）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AArch32%EF%BC%8832%E4%BD%8D%E6%A8%A1%E5%BC%8F%EF%BC%89"><span class="nav-number">1.2.2.</span> <span class="nav-text">AArch32（32位模式）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AArch64%E6%89%A7%E8%A1%8C%E7%8A%B6%E6%80%81"><span class="nav-number">1.3.</span> <span class="nav-text">AArch64执行状态</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%84%E5%AD%98%E5%99%A8"><span class="nav-number">1.3.1.</span> <span class="nav-text">寄存器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-number">1.4.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AArch32%E6%89%A7%E8%A1%8C%E7%8A%B6%E6%80%81"><span class="nav-number">1.5.</span> <span class="nav-text">AArch32执行状态</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%84%E5%AD%98%E5%99%A8-1"><span class="nav-number">1.5.1.</span> <span class="nav-text">寄存器</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E6%8C%87%E4%BB%A4"><span class="nav-number">2.</span> <span class="nav-text">数据处理指令</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E6%A0%87%E5%BF%97%E4%BD%8D"><span class="nav-number">2.1.</span> <span class="nav-text">条件标志位</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AE%97%E6%9C%AF%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.</span> <span class="nav-text">算术指令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#add"><span class="nav-number">2.2.1.</span> <span class="nav-text">add</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#adds"><span class="nav-number">2.2.2.</span> <span class="nav-text">adds</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#adr"><span class="nav-number">2.2.3.</span> <span class="nav-text">adr</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sub"><span class="nav-number">2.2.4.</span> <span class="nav-text">sub</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mul"><span class="nav-number">2.2.5.</span> <span class="nav-text">mul</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#muls"><span class="nav-number">2.2.6.</span> <span class="nav-text">muls</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mla"><span class="nav-number">2.2.7.</span> <span class="nav-text">mla</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sdiv-udiv"><span class="nav-number">2.2.8.</span> <span class="nav-text">sdiv&#x2F;udiv</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A7%BB%E4%BD%8D%E5%92%8C%E5%BE%AA%E7%8E%AF%E7%A7%BB%E4%BD%8D"><span class="nav-number">2.3.</span> <span class="nav-text">移位和循环移位</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#lsl%EF%BC%88Logical-Shift-Left%EF%BC%89"><span class="nav-number">2.3.1.</span> <span class="nav-text">lsl（Logical Shift Left）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#lsr%EF%BC%88Logical-Shift-Right%EF%BC%89"><span class="nav-number">2.3.2.</span> <span class="nav-text">lsr（Logical Shift Right）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#asr%EF%BC%88Arithmetic-Shift-Left%EF%BC%89"><span class="nav-number">2.3.3.</span> <span class="nav-text">asr（Arithmetic Shift Left）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rrx"><span class="nav-number">2.3.4.</span> <span class="nav-text">rrx</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97"><span class="nav-number">2.4.</span> <span class="nav-text">逻辑运算</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#AND"><span class="nav-number">2.4.1.</span> <span class="nav-text">AND</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ORR"><span class="nav-number">2.4.2.</span> <span class="nav-text">ORR</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#EOR%EF%BC%88Exclusive-OR%EF%BC%89"><span class="nav-number">2.4.3.</span> <span class="nav-text">EOR（Exclusive OR）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LSR%EF%BC%88Logical-Shift-Right%EF%BC%89"><span class="nav-number">2.4.4.</span> <span class="nav-text">LSR（Logical Shift Right）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UBFIZ-Unsigned-Bitfield-Insert-and-Zero"><span class="nav-number">2.4.5.</span> <span class="nav-text">UBFIZ (Unsigned Bitfield Insert and Zero)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E6%8C%87%E4%BB%A4"><span class="nav-number">2.5.</span> <span class="nav-text">条件指令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#cmp"><span class="nav-number">2.5.1.</span> <span class="nav-text">cmp</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TST"><span class="nav-number">2.5.2.</span> <span class="nav-text">TST</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A7%BB%E5%8A%A8%E6%8C%87%E4%BB%A4"><span class="nav-number">2.6.</span> <span class="nav-text">移动指令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#mov"><span class="nav-number">2.6.1.</span> <span class="nav-text">mov</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#movz"><span class="nav-number">2.6.2.</span> <span class="nav-text">movz</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#movk"><span class="nav-number">2.6.3.</span> <span class="nav-text">movk</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#movn"><span class="nav-number">2.6.4.</span> <span class="nav-text">movn</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MVN"><span class="nav-number">2.6.5.</span> <span class="nav-text">MVN</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%86%85%E5%AD%98%E8%AE%BF%E9%97%AE%E6%8C%87%E4%BB%A4"><span class="nav-number">3.</span> <span class="nav-text">内存访问指令</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8A%A0%E8%BD%BD%E5%92%8C%E5%AD%98%E5%82%A8%E6%8C%87%E4%BB%A4"><span class="nav-number">3.1.</span> <span class="nav-text">加载和存储指令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#LDR%EF%BC%88Load-Register%EF%BC%89"><span class="nav-number">3.1.1.</span> <span class="nav-text">LDR（Load Register）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LDRB%EF%BC%88Load-Register-Byte%EF%BC%89"><span class="nav-number">3.1.2.</span> <span class="nav-text">LDRB（Load Register Byte）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LDP%EF%BC%88Load-Pair-of-Registers%EF%BC%89"><span class="nav-number">3.1.3.</span> <span class="nav-text">LDP（Load Pair of Registers）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LDUR%EF%BC%88Load-Unscaled-Register%EF%BC%89"><span class="nav-number">3.1.4.</span> <span class="nav-text">LDUR（Load Unscaled Register）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LDRSW%EF%BC%88Load-Register-Signed-Word%EF%BC%89"><span class="nav-number">3.1.5.</span> <span class="nav-text">LDRSW（Load Register Signed Word）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#STR%EF%BC%88Store-Register%EF%BC%89"><span class="nav-number">3.1.6.</span> <span class="nav-text">STR（Store Register）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#STRB%EF%BC%88Store-Register-Byte%EF%BC%89"><span class="nav-number">3.1.7.</span> <span class="nav-text">STRB（Store Register Byte）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#STP%EF%BC%88Store-Pair%EF%BC%89"><span class="nav-number">3.1.8.</span> <span class="nav-text">STP（Store Pair）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#EXTR%EF%BC%88Extract-Register%EF%BC%89"><span class="nav-number">3.1.9.</span> <span class="nav-text">EXTR（Extract Register）</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8E%A7%E5%88%B6%E6%B5%81"><span class="nav-number">4.</span> <span class="nav-text">控制流</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E6%94%AF%E6%8C%87%E4%BB%A4"><span class="nav-number">4.1.</span> <span class="nav-text">分支指令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#B%EF%BC%88Branch%EF%BC%89"><span class="nav-number">4.1.1.</span> <span class="nav-text">B（Branch）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BX%EF%BC%88Branch-and-Exchange%EF%BC%89"><span class="nav-number">4.1.2.</span> <span class="nav-text">BX（Branch and Exchange）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BL%EF%BC%88Branch-with-Link%EF%BC%89"><span class="nav-number">4.1.3.</span> <span class="nav-text">BL（Branch with Link）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BR"><span class="nav-number">4.1.4.</span> <span class="nav-text">BR</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CBZ%EF%BC%88Compare-and-Branch-on-Zero%EF%BC%89"><span class="nav-number">4.1.5.</span> <span class="nav-text">CBZ（Compare and Branch on Zero）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CBNZ%EF%BC%88Compare-and-Branch-on-Non-Zero%EF%BC%89"><span class="nav-number">4.1.6.</span> <span class="nav-text">CBNZ（Compare and Branch on Non-Zero）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#B-NE"><span class="nav-number">4.1.7.</span> <span class="nav-text">B.NE</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8C%87%E4%BB%A4%E5%A4%A7%E5%85%A8"><span class="nav-number">5.</span> <span class="nav-text">指令大全</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#MVN%EF%BC%88Move-Not%EF%BC%89"><span class="nav-number">5.1.</span> <span class="nav-text">MVN（Move Not）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ROR%EF%BC%88Rotate-Right%EF%BC%89"><span class="nav-number">5.2.</span> <span class="nav-text">ROR（Rotate Right）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#EON%EF%BC%88Exclusive-OR-Not%EF%BC%89"><span class="nav-number">5.3.</span> <span class="nav-text">EON（Exclusive OR Not）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UXTW%EF%BC%88Unsigned-Extend-Word-to-Doubleword%EF%BC%89"><span class="nav-number">5.4.</span> <span class="nav-text">UXTW（Unsigned Extend Word to Doubleword）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SXTW%EF%BC%88Sign-Extend-Word%EF%BC%89"><span class="nav-number">5.5.</span> <span class="nav-text">SXTW（Sign Extend Word）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#BFXIL%EF%BC%88Bit-Field-Extract-and-Insert-Low%EF%BC%89"><span class="nav-number">5.6.</span> <span class="nav-text">BFXIL（Bit Field Extract and Insert Low）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#BFI%EF%BC%88Bit-Field-Insert%EF%BC%89"><span class="nav-number">5.7.</span> <span class="nav-text">BFI（Bit Field Insert）</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Bileton"
      src="/images/android.svg">
  <p class="site-author-name" itemprop="name">Bileton</p>
  <div class="site-description" itemprop="description">路漫漫其修远夕！</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">101</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">35</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">93</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Bileton</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">856k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">12:58</span>
</div>


<span id="timeDate">载入天数...</span>
<span id="times">载入时分秒...</span>
<script>
    var now = new Date();
    function createtime() {
        var grt= new Date("01/01/2024 00:00:00"); //修改为你的网站开始运行的时间
        now.setTime(now.getTime()+250);
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
        document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 ";
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒.";
    }
setInterval("createtime()",250);
</script>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
